---
layout: post
title: 全概率公式与贝叶斯公式
categories: [概率论与数理统计]
tags: 概率论与数理统计
---

## 1、条件概率公式

　　设A、B是两个事件，且$P(B)>0$，则在事件B发生的条件下，事件A发生的条件概率为：   

$$P(A|B)=\frac{P(AB)}{P(B)}$$

　　结合韦恩图来理解，在B发生的基础上，A发生的概率。B发生这件事已经是基础的条件了，现在进入B已经发生的世界，看看A发生的概率是多少。
那么分子就是B发生A也发生，分母就是B这个世界发生的概率了。

![条件概率](\images\posts\Math\ProbabilityTheory\ConditionalProbability.png){:height="70%" width="70%"} 

## 2、乘法公式

　　由条件概率公式可以推导得到：

$$P(AB)=P(B) \cdot P(A|B)=P(A) \cdot P(B|A)$$

　　乘法公式可以推广为：对于任何正整数$n \geq 2$，当$P(A_1A_2 \dots A_{n-1}) \geq 0$时，有：

$$P(A_1A_2 \dots A_{n-1}A_n)=P(A_1)P(A_2|A_1)P(A_3|A_1A_2) \dots P(A_n|A_1A_2 \dots A_{n-1})$$

## 3、全概率公式

　　首先理解一下什么事"**完备事件群**"，设$B_1,B_2, \dots $为有限或无线个事件。

　　将满足：

$$B_iB_j=\Phi(不可能事件)$$

$$B_1 + B_2 + \dots = \Omega(必然事件)$$

　　这样的一组事件组称为一个"完备事件群"。简而言之，就是事件之间两两互斥，所有的事件并集是整个样本空间。

　　假设我们要研究事件A，希望能够求出$P(A)$，但是经过一番探索，却发现$P(A)$本身很难直接求出，不过去能够比较容易的
求出各个$P(B_i)$，以及相应的条件概率$P(A|B_i)$。

　　能不能根据这些信息，间接地求出$P(A)$呢？

　　这当然是可以的。

　　我们不要忘记，$B_i$是两两互斥的。 

$$A=A\Omega=AB_1+AB_2+AB_3+ \dots$$

　　显然，$AB_1,AB_2,AB_3,\dots$也是两两互斥的。

　　一说到两两互斥，我们就想到了概率的加法定理：

$$\begin{equation}
\begin{aligned}
P(A)&=P(A\Omega)\\&=P(AB_1+AB_2+AB_3+ \dots)\\&=P(AB_1)+P(AB_2)+P(AB_3)+\dots
\end{aligned}
\end{equation}$$

　　再根据条件概率的定义，得到全概率公式：

$$P(A)=P(B_1)P(A|B_1)+P(B_2)P(A|B_2)+P(B_3)P(A|B_3)+\dots$$

　　这样费了一番周折，我们总算得到了所求的$P(A)$。可以发现，虽然$P(A)$本身不好求，但我们可以根据它散落的“碎片”
间接地将其求出。但不是所有情况都是能这样求出的——我们必须保证$B_1,B_2,B_3,\dots$是一个完备事件群。这个其实也很好理解，
假如你想将一个碎掉的花瓶重新还原，碎片如果不全，或者碎片之间出现了多余的“重叠”，还原工作都将以失败告终。

>示例：有三个偷窃者A、B和C，A今晚作案的概率是0.8,，B今晚作案的概率是0.1，C今晚作案的概率是0.5。
除此之外，还推断出A的得手率是0.1，B的得手率是1.0，C的得手率是0.5。那么，今晚村里有东西被偷的概率是多少？
   
　　将文字描述转换为数学语言，根据作案频率可知：

$$P(A)=0.8,\\P(A)=0.1,\\P(C)=0.5$$

　　将村里有东西被偷记为S，根据得手率可以得到：

$$P(S|A)=0.1,\\P(S|B)=1.0,\\P(S|C)=0.5$$

　　根据全概率公式可以求得：

$$P(S)=P(A)P(S|A)+P(B)P(S|B)+P(C)P(S|C)=0.43$$

## 4、贝叶斯公式

　　直接给出贝叶斯公式：

$$P(B_i|A)=\frac{P(AB_i)}{P(A)}=\frac{P(B_i)P(A|B_i)}{\sum_j P(B_j)P(A|B_j)}$$

　　这个公式本身平平无奇，无非就是条件概率的定义加上全概率公式一起作出的一个推导而已。但它所表达的意义却非常深刻。

　　在全概率公式中，如果将$A$看成结果，$B_i$看成是导致结果发生的诸多原因之一，那么全概率公式就是一个“**原因推结果**”的过程。
但贝叶斯公式却恰恰相反。贝叶斯公式中，我们是知道结果反过来研究造成结果发生的原因，是XXX原因造成的可能性有多大，即“**结果推原因**”。